apiVersion: v1
kind: Secret
metadata:
  name: {{ include "outline.fullname" . }}-secret
  labels:
    {{- include "outline.labels" . | nindent 4 }}

  # Since there is some auto-generated keys, to keep the database connectable, secrets are kept.
  # You should manually delete it when needed.
  annotations:
    "helm.sh/resource-policy": keep

type: Opaque
data:
  # follows bitnami's autogeneration of keys.
  
  SECRET_KEY: {{ include "common.secrets.passwords.manage" (dict "secret" (printf "%s-secret" (include "common.names.fullname" .)) "key" "SECRET_KEY" "providedValues" (list "secretKey") "length" 32 "context" $) }}
  UTILS_SECRET: {{ include "common.secrets.passwords.manage" (dict "secret" (printf "%s-secret" (include "common.names.fullname" .)) "key" "UTILS_SECRET" "providedValues" (list "utilsSecret") "lenght" 32 "context" $) }}
